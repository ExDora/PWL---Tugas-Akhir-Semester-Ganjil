<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Katalog Buku - LibraryHub</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><polygon fill="%23ffffff05" points="0,0 1000,300 1000,1000 0,700"/></svg>');
            background-size: cover;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            position: relative;
            z-index: 2;
        }

        .header-title {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .header-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 2rem;
        }

        .nav-breadcrumb {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
            font-size: 0.9rem;
        }

        .nav-breadcrumb a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .nav-breadcrumb a:hover {
            color: white;
        }

        .nav-breadcrumb span {
            opacity: 0.6;
        }

        /* Search and Filter Section */
        .search-section {
            background: white;
            padding: 2rem;
            margin: -3rem 2rem 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 10;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .search-form {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 300px;
            padding: 1rem 1rem 1rem 3rem;
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f8f9fa;
            position: relative;
        }

        .search-input:focus {
            outline: none;
            border-color: #3498db;
            background: white;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.2);
        }

        .search-input-container {
            position: relative;
            flex: 1;
            min-width: 300px;
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #7f8c8d;
            font-size: 1.1rem;
            z-index: 5;
        }

        .search-btn {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        .filters {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-label {
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9rem;
        }

        .filter-select {
            padding: 0.5rem 1rem;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            background: white;
            font-size: 0.9rem;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .filter-select:focus {
            outline: none;
            border-color: #3498db;
        }

        .clear-filters {
            background: transparent;
            color: #e74c3c;
            border: 2px solid #e74c3c;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .clear-filters:hover {
            background: #e74c3c;
            color: white;
        }

        /* Results Section */
        .results-section {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem 2rem;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .results-info {
            color: #2c3e50;
            font-weight: 600;
        }

        .results-count {
            color: #3498db;
        }

        .view-toggle {
            display: flex;
            background: white;
            border-radius: 8px;
            padding: 0.3rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .view-btn {
            padding: 0.5rem 1rem;
            background: transparent;
            border: none;
            cursor: pointer;
            border-radius: 6px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .view-btn.active {
            background: #3498db;
            color: white;
        }

        .sort-select {
            padding: 0.5rem 1rem;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            background: white;
            cursor: pointer;
        }

        /* Book Grid */
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .books-list {
            display: none;
            flex-direction: column;
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .book-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .book-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .book-cover {
            height: 300px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            position: relative;
            overflow: hidden;
        }

        .book-cover::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 49%, rgba(255,255,255,0.3) 50%, transparent 51%);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .book-info {
            padding: 1.5rem;
        }

        .book-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 0.5rem;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .book-author {
            color: #7f8c8d;
            margin-bottom: 0.8rem;
            font-weight: 500;
        }

        .book-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            margin-bottom: 1rem;
        }

        .book-category {
            background: #e8f4fd;
            color: #3498db;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-weight: 500;
        }

        .book-year {
            color: #7f8c8d;
        }

        .book-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .status-available {
            background: #27ae60;
        }

        .status-borrowed {
            background: #e74c3c;
        }

        .status-reserved {
            background: #f39c12;
        }

        .status-text {
            font-size: 0.9rem;
            font-weight: 600;
        }

        .book-actions {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            flex: 1;
            padding: 0.8rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #2c3e50;
            border: 2px solid #e1e8ed;
        }

        .btn-disabled {
            background: #95a5a6;
            color: white;
            cursor: not-allowed;
        }

        .action-btn:hover:not(.btn-disabled) {
            transform: translateY(-1px);
        }

        .btn-primary:hover {
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
        }

        .btn-secondary:hover {
            background: #e9ecef;
        }

        /* List view styles */
        .book-card.list-view {
            display: flex;
            flex-direction: row;
            align-items: center;
            padding: 1.5rem;
            height: auto;
        }

        .book-card.list-view .book-cover {
            width: 120px;
            height: 160px;
            flex-shrink: 0;
            margin-right: 2rem;
            font-size: 2.5rem;
        }

        .book-card.list-view .book-info {
            flex: 1;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .book-card.list-view .book-actions {
            flex-shrink: 0;
            flex-direction: column;
            width: 150px;
            margin-left: 2rem;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            margin-top: 3rem;
        }

        .page-btn {
            padding: 0.8rem 1rem;
            border: 2px solid #e1e8ed;
            background: white;
            color: #2c3e50;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .page-btn:hover {
            border-color: #3498db;
            color: #3498db;
        }

        .page-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .page-btn:disabled {
            background: #f8f9fa;
            color: #bdc3c7;
            cursor: not-allowed;
            border-color: #e1e8ed;
        }

        /* Loading and Empty States */
        .loading-spinner {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 300px;
            font-size: 2rem;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: #7f8c8d;
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-title {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #2c3e50;
        }

        .empty-subtitle {
            margin-bottom: 2rem;
        }

        .empty-action {
            background: #3498db;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s ease;
        }

        .empty-action:hover {
            background: #2980b9;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-title {
                font-size: 2rem;
            }

            .search-section {
                margin: -2rem 1rem 2rem;
                padding: 1.5rem;
            }

            .search-form {
                flex-direction: column;
            }

            .search-input-container {
                min-width: auto;
            }

            .filters {
                justify-content: center;
            }

            .results-section {
                padding: 0 1rem 2rem;
            }

            .results-header {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }

            .books-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 1.5rem;
            }

            .book-card.list-view {
                flex-direction: column;
                text-align: center;
            }

            .book-card.list-view .book-cover {
                margin-right: 0;
                margin-bottom: 1rem;
            }

            .book-card.list-view .book-actions {
                margin-left: 0;
                margin-top: 1rem;
                width: 100%;
                flex-direction: row;
            }

            .pagination {
                flex-wrap: wrap;
                gap: 0.3rem;
            }

            .page-btn {
                padding: 0.6rem 0.8rem;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .books-grid {
                grid-template-columns: 1fr;
            }
            
            .view-toggle {
                display: none;
            }
        }

        /* Back to Dashboard */
        .back-nav {
            position: fixed;
            top: 2rem;
            left: 2rem;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            text-decoration: none;
            color: #2c3e50;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .back-nav:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        /* Book Modal */
        .book-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 2rem;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #7f8c8d;
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: #2c3e50;
        }

        .modal-book-cover {
            width: 150px;
            height: 200px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            margin: 0 auto 2rem;
        }

        .modal-book-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 1rem;
            text-align: center;
        }

        .modal-book-author {
            text-align: center;
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }

        .modal-book-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .detail-item {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
        }

        .detail-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-bottom: 0.5rem;
        }

        .detail-value {
            font-weight: 600;
            color: #2c3e50;
        }

        .modal-description {
            margin-bottom: 2rem;
            line-height: 1.6;
            color: #2c3e50;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }
    </style>
</head>
<body>
    <!-- Back Navigation -->
    <a href="dashboard.html" class="back-nav">‚Üê Dashboard</a>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <nav class="nav-breadcrumb">
                <a href="index.html">Beranda</a>
                <span>‚Ä∫</span>
                <a href="dashboard.html">Dashboard</a>
                <span>‚Ä∫</span>
                <span>Katalog</span>
            </nav>
            <h1 class="header-title">Katalog Buku</h1>
            <p class="header-subtitle">Temukan buku favorit Anda dari ribuan koleksi yang tersedia</p>
        </div>
    </header>

    <!-- Search and Filter Section -->
    <section class="search-section">
        <form class="search-form" id="searchForm">
            <div class="search-input-container">
                <span class="search-icon">üîç</span>
                <input 
                    type="text" 
                    class="search-input" 
                    id="searchInput"
                    placeholder="Cari judul buku, penulis, atau ISBN..."
                >
            </div>
            <button type="submit" class="search-btn">Cari Buku</button>
        </form>
        
        <div class="filters">
            <div class="filter-group">
                <label class="filter-label">Kategori:</label>
                <select class="filter-select" id="categoryFilter">
                    <option value="">Semua Kategori</option>
                    <option value="programming">Programming</option>
                    <option value="design">Design</option>
                    <option value="business">Business</option>
                    <option value="science">Science</option>
                    <option value="fiction">Fiction</option>
                    <option value="biography">Biography</option>
                    <option value="history">History</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label class="filter-label">Tahun:</label>
                <select class="filter-select" id="yearFilter">
                    <option value="">Semua Tahun</option>
                    <option value="2024">2024</option>
                    <option value="2023">2023</option>
                    <option value="2022">2022</option>
                    <option value="2021">2021</option>
                    <option value="2020">2020</option>
                    <option value="older">Lebih Lama</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label class="filter-label">Status:</label>
                <select class="filter-select" id="statusFilter">
                    <option value="">Semua Status</option>
                    <option value="available">Tersedia</option>
                    <option value="borrowed">Dipinjam</option>
                    <option value="reserved">Direservasi</option>
                </select>
            </div>
            
            <button type="button" class="clear-filters" id="clearFilters">Reset Filter</button>
        </div>
    </section>

    <!-- Results Section -->
    <section class="results-section">
        <div class="results-header">
            <div class="results-info">
                Menampilkan <span class="results-count" id="resultsCount">0</span> dari <span id="totalBooks">0</span> buku
            </div>
            
            <div style="display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
                <div class="view-toggle">
                    <button class="view-btn active" id="gridView" data-view="grid">‚äû</button>
                    <button class="view-btn" id="listView" data-view="list">‚ò∞</button>
                </div>
                
                <select class="sort-select" id="sortSelect">
                    <option value="title">Urutkan: Judul</option>
                    <option value="author">Urutkan: Penulis</option>
                    <option value="year">Urutkan: Tahun Terbit</option>
                    <option value="popular">Urutkan: Popularitas</option>
                </select>
            </div>
        </div>

        <!-- Books Grid -->
        <div class="books-grid" id="booksGrid">
            <!-- Books will be populated by JavaScript -->
        </div>

        <!-- Books List -->
        <div class="books-list" id="booksList">
            <!-- Books will be populated by JavaScript -->
        </div>

        <!-- Loading Spinner -->
        <div class="loading-spinner" id="loadingSpinner" style="display: none;">
            <div class="spinner"></div>
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState" style="display: none;">
            <div class="empty-icon">üìö</div>
            <h3 class="empty-title">Tidak ada buku ditemukan</h3>
            <p class="empty-subtitle">Coba ubah kata kunci pencarian atau filter yang Anda gunakan</p>
            <button class="empty-action" onclick="clearAllFilters()">Reset Pencarian</button>
        </div>

        <!-- Pagination -->
        <div class="pagination" id="pagination">
            <!-- Pagination will be generated by JavaScript -->
        </div>
    </section>

    <!-- Book Detail Modal -->
    <div class="book-modal" id="bookModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeBookModal()">√ó</button>
            <div class="modal-book-cover" id="modalBookCover">üìö</div>
            <h2 class="modal-book-title" id="modalBookTitle"></h2>
            <p class="modal-book-author" id="modalBookAuthor"></p>
            
            <div class="modal-book-details">
                <div class="detail-item">
                    <div class="detail-label">Kategori</div>
                    <div class="detail-value" id="modalBookCategory"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Tahun Terbit</div>
                    <div class="detail-value" id="modalBookYear"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">ISBN</div>
                    <div class="detail-value" id="modalBookISBN"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Halaman</div>
                    <div class="detail-value" id="modalBookPages"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Status</div>
                    <div class="detail-value" id="modalBookStatus"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Rating</div>
                    <div class="detail-value" id="modalBookRating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                </div>
            </div>
            
            <div class="modal-description" id="modalBookDescription"></div>
            
            <div class="modal-actions">
                <button class="action-btn btn-primary" id="modalBookingBtn">üìÖ Booking Buku</button>
                <button class="action-btn btn-secondary">‚≠ê Tambah Favorit</button>
            </div>
        </div>
    </div>

    <script>
        // Sample book data
        const booksData = [
            {
                id: 1,
                title: "Clean Code: A Handbook of Agile Software Craftsmanship",
                author: "Robert C. Martin",
                category: "programming",
                year: 2021,
                isbn: "978-0132350884",
                pages: 464,
                status: "available",
                description: "Buku ini mengajarkan prinsip-prinsip menulis kode yang bersih, mudah dibaca, dan mudah dikelola. Essential untuk setiap programmer yang ingin meningkatkan kualitas kodenya.",
                cover: "üíª",
                rating: 5,
                popularity: 95
            },
            {
                id: 2,
                title: "The Design of Everyday Things",
                author: "Don Norman",
                category: "design",
                year: 2022,
                isbn: "978-0465050659",
                pages: 368,
                status: "borrowed",
                description: "Panduan klasik tentang desain yang berpusat pada pengguna. Menjelaskan bagaimana desain yang baik dapat membuat hidup lebih mudah.",
                cover: "üé®",
                rating: 4,
                popularity: 87
            },
            {
                id: 3,
                title: "JavaScript: The Good Parts",
                author: "Douglas Crockford",
                category: "programming",
                year: 2020,
                isbn: "978-0596517748",
                pages: 153,
                status: "available",
                description: "Mengeksplorasi bagian-bagian terbaik dari JavaScript dan mengajarkan cara menulis kode JavaScript yang efektif dan elegan.",
                cover: "‚ö°",
                rating: 4,
                popularity: 82
            },
            {
                id: 4,
                title: "Thinking, Fast and Slow",
                author: "Daniel Kahneman",
                category: "science",
                year: 2019,
                isbn: "978-0374533557",
                pages: 499,
                status: "reserved",
                description: "Eksplorasi mendalam tentang dua sistem pemikiran manusia dan bagaimana keduanya membentuk penilaian dan keputusan kita.",
                cover: "üß†",
                rating: 5,
                popularity: 91
            },
            {
                id: 5,
                title: "The Lean Startup",
                author: "Eric Ries",
                category: "business",
                year: 2023,
                isbn: "978-0307887917",
                pages: 336,
                status: "available",
                description: "Metodologi revolusioner untuk menciptakan dan mengelola startup yang sukses di era yang penuh ketidakpastian.",
                cover: "üöÄ",
                rating: 4,
                popularity: 78
            },
            {
                id: 6,
                title: "1984",
                author: "George Orwell",
                category: "fiction",
                year: 2021,
                isbn: "978-0452284234",
                pages: 328,
                status: "available",
                description: "Novel distopia klasik yang menggambarkan masyarakat totaliter di bawah pengawasan Big Brother. Sangat relevan dengan era digital saat ini.",
                cover: "üëÅÔ∏è",
                rating: 5,
                popularity: 94
            },
            {
                id: 7,
                title: "Steve Jobs",
                author: "Walter Isaacson",
                category: "biography",
                year: 2022,
                isbn: "978-1451648539",
                pages: 656,
                status: "borrowed",
                description: "Biografi lengkap tentang kehidupan dan karir Steve Jobs, pendiri Apple, berdasarkan wawancara eksklusif.",
                cover: "üçé",
                rating: 5,
                popularity: 89
            },
            {
                id: 8,
                title: "A Brief History of Time",
                author: "Stephen Hawking",
                category: "science",
                year: 2020,
                isbn: "978-0553380163",
                pages: 256,
                status: "available",
                description: "Penjelasan yang dapat diakses tentang kosmologi modern, dari Big Bang hingga lubang hitam dan perjalanan waktu.",
                cover: "üåå",
                rating: 5,
                popularity: 86
            },
            {
                id: 9,
                title: "The Art of War",
                author: "Sun Tzu",
                category: "history",
                year: 2021,
                isbn: "978-1599869773",
                pages: 273,
                status: "available",
                description: "Teks klasik strategi militer Cina yang telah diadaptasi untuk bisnis dan kehidupan sehari-hari.",
                cover: "‚öîÔ∏è",
                rating: 4,
                popularity: 75
            },
            {
                id: 10,
                title: "Design Patterns",
                author: "Gang of Four",
                category: "programming",
                year: 2023,
                isbn: "978-0201633612",
                pages: 395,
                status: "reserved",
                description: "Panduan fundamental tentang design patterns dalam pengembangan perangkat lunak berorientasi objek.",
                cover: "üîß",
                rating: 4,
                popularity: 83
            },
            {
                id: 11,
                title: "Atomic Habits",
                author: "James Clear",
                category: "business",
                year: 2024,
                isbn: "978-0735211292",
                pages: 320,
                status: "available",
                description: "Panduan praktis untuk membangun kebiasaan baik dan menghilangkan kebiasaan buruk melalui perubahan kecil yang konsisten.",
                cover: "‚ö°",
                rating: 5,
                popularity: 92
            },
            {
                id: 12,
                title: "The Psychology of Computer Programming",
                author: "Gerald M. Weinberg",
                category: "programming",
                year: 2019,
                isbn: "978-0932633420",
                pages: 288,
                status: "borrowed",
                description: "Eksplorasi aspek manusia dalam pengembangan perangkat lunak dan bagaimana psikologi mempengaruhi proses programming.",
                cover: "üë®‚Äçüíª",
                rating: 4,
                popularity: 71
            }
        ];

        // Global variables
        let currentBooks = [...booksData];
        let currentPage = 1;
        const booksPerPage = 8;
        let currentView = 'grid';

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            displayBooks();
            setupEventListeners();
            updateResultsCount();
        });

        // Setup all event listeners
        function setupEventListeners() {
            // Search form
            document.getElementById('searchForm').addEventListener('submit', handleSearch);
            document.getElementById('searchInput').addEventListener('input', debounce(handleSearch, 300));
            
            // Filters
            document.getElementById('categoryFilter').addEventListener('change', applyFilters);
            document.getElementById('yearFilter').addEventListener('change', applyFilters);
            document.getElementById('statusFilter').addEventListener('change', applyFilters);
            document.getElementById('clearFilters').addEventListener('click', clearAllFilters);
            
            // View toggle
            document.getElementById('gridView').addEventListener('click', () => switchView('grid'));
            document.getElementById('listView').addEventListener('click', () => switchView('list'));
            
            // Sort
            document.getElementById('sortSelect').addEventListener('change', applySorting);
            
            // Modal close
            document.getElementById('bookModal').addEventListener('click', function(e) {
                if (e.target === this) closeBookModal();
            });
        }

        // Handle search
        function handleSearch(e) {
            if (e.type === 'submit') {
                e.preventDefault();
            }
            
            showLoading();
            
            setTimeout(() => {
                applyFilters();
            }, 500);
        }

        // Apply all filters
        function applyFilters() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;
            const yearFilter = document.getElementById('yearFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;

            currentBooks = booksData.filter(book => {
                const matchesSearch = !searchTerm || 
                    book.title.toLowerCase().includes(searchTerm) ||
                    book.author.toLowerCase().includes(searchTerm) ||
                    book.isbn.includes(searchTerm);
                
                const matchesCategory = !categoryFilter || book.category === categoryFilter;
                
                const matchesYear = !yearFilter || 
                    (yearFilter === 'older' ? book.year < 2020 : book.year.toString() === yearFilter);
                
                const matchesStatus = !statusFilter || book.status === statusFilter;

                return matchesSearch && matchesCategory && matchesYear && matchesStatus;
            });

            applySorting();
            currentPage = 1;
            displayBooks();
            updateResultsCount();
            hideLoading();
        }

        // Apply sorting
        function applySorting() {
            const sortBy = document.getElementById('sortSelect').value;
            
            currentBooks.sort((a, b) => {
                switch (sortBy) {
                    case 'title':
                        return a.title.localeCompare(b.title);
                    case 'author':
                        return a.author.localeCompare(b.author);
                    case 'year':
                        return b.year - a.year;
                    case 'popular':
                        return b.popularity - a.popularity;
                    default:
                        return 0;
                }
            });
        }

        // Switch between grid and list view
        function switchView(view) {
            currentView = view;
            
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(view + 'View').classList.add('active');
            
            if (view === 'grid') {
                document.getElementById('booksGrid').style.display = 'grid';
                document.getElementById('booksList').style.display = 'none';
            } else {
                document.getElementById('booksGrid').style.display = 'none';
                document.getElementById('booksList').style.display = 'flex';
            }
            
            displayBooks();
        }

        // Display books
        function displayBooks() {
            const startIndex = (currentPage - 1) * booksPerPage;
            const endIndex = startIndex + booksPerPage;
            const booksToShow = currentBooks.slice(startIndex, endIndex);

            if (booksToShow.length === 0) {
                showEmptyState();
                return;
            }

            hideEmptyState();

            const gridContainer = document.getElementById('booksGrid');
            const listContainer = document.getElementById('booksList');
            
            gridContainer.innerHTML = '';
            listContainer.innerHTML = '';

            booksToShow.forEach(book => {
                const bookCard = createBookCard(book);
                gridContainer.appendChild(bookCard.cloneNode(true));
                
                const listCard = createBookCard(book, true);
                listContainer.appendChild(listCard);
            });

            generatePagination();
            addBookCardEventListeners();
        }

        // Create book card
        function createBookCard(book, isListView = false) {
            const card = document.createElement('div');
            card.className = `book-card${isListView ? ' list-view' : ''}`;
            card.dataset.bookId = book.id;

            const statusClass = `status-${book.status}`;
            const statusText = {
                available: 'Tersedia',
                borrowed: 'Dipinjam',
                reserved: 'Direservasi'
            }[book.status];

            const actionButton = book.status === 'available' 
                ? `<button class="action-btn btn-primary" onclick="bookingBook(${book.id})">üìÖ Booking</button>`
                : `<button class="action-btn btn-disabled" disabled>Tidak Tersedia</button>`;

            card.innerHTML = `
                <div class="book-cover">${book.cover}</div>
                <div class="book-info">
                    <h3 class="book-title">${book.title}</h3>
                    <p class="book-author">oleh ${book.author}</p>
                    <div class="book-meta">
                        <span class="book-category">${getCategoryName(book.category)}</span>
                        <span class="book-year">${book.year}</span>
                    </div>
                    <div class="book-status">
                        <span class="status-indicator ${statusClass}"></span>
                        <span class="status-text">${statusText}</span>
                    </div>
                    <div class="book-actions">
                        ${actionButton}
                        <button class="action-btn btn-secondary" onclick="openBookModal(${book.id})">Detail</button>
                    </div>
                </div>
            `;

            return card;
        }

        // Add event listeners to book cards
        function addBookCardEventListeners() {
            document.querySelectorAll('.book-card').forEach(card => {
                const bookCover = card.querySelector('.book-cover');
                const bookTitle = card.querySelector('.book-title');
                
                [bookCover, bookTitle].forEach(element => {
                    element.style.cursor = 'pointer';
                    element.addEventListener('click', () => {
                        const bookId = parseInt(card.dataset.bookId);
                        openBookModal(bookId);
                    });
                });
            });
        }

        // Get category display name
        function getCategoryName(category) {
            const categories = {
                programming: 'Programming',
                design: 'Design',
                business: 'Bisnis',
                science: 'Sains',
                fiction: 'Fiksi',
                biography: 'Biografi',
                history: 'Sejarah'
            };
            return categories[category] || category;
        }

        // Generate pagination
        function generatePagination() {
            const totalPages = Math.ceil(currentBooks.length / booksPerPage);
            const paginationContainer = document.getElementById('pagination');
            
            if (totalPages <= 1) {
                paginationContainer.innerHTML = '';
                return;
            }

            let paginationHTML = '';
            
            // Previous button
            paginationHTML += `
                <button class="page-btn" ${currentPage === 1 ? 'disabled' : ''} 
                        onclick="changePage(${currentPage - 1})">‚Äπ Sebelumnya</button>
            `;
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 2 && i <= currentPage + 2)) {
                    paginationHTML += `
                        <button class="page-btn ${i === currentPage ? 'active' : ''}" 
                                onclick="changePage(${i})">${i}</button>
                    `;
                } else if (i === currentPage - 3 || i === currentPage + 3) {
                    paginationHTML += `<span class="page-btn">...</span>`;
                }
            }
            
            // Next button
            paginationHTML += `
                <button class="page-btn" ${currentPage === totalPages ? 'disabled' : ''} 
                        onclick="changePage(${currentPage + 1})">Selanjutnya ‚Ä∫</button>
            `;

            paginationContainer.innerHTML = paginationHTML;
        }

        // Change page
        function changePage(page) {
            const totalPages = Math.ceil(currentBooks.length / booksPerPage);
            if (page >= 1 && page <= totalPages) {
                currentPage = page;
                displayBooks();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Open book modal
        function openBookModal(bookId) {
            const book = booksData.find(b => b.id === bookId);
            if (!book) return;

            document.getElementById('modalBookCover').textContent = book.cover;
            document.getElementById('modalBookTitle').textContent = book.title;
            document.getElementById('modalBookAuthor').textContent = `oleh ${book.author}`;
            document.getElementById('modalBookCategory').textContent = getCategoryName(book.category);
            document.getElementById('modalBookYear').textContent = book.year;
            document.getElementById('modalBookISBN').textContent = book.isbn;
            document.getElementById('modalBookPages').textContent = `${book.pages} halaman`;
            document.getElementById('modalBookStatus').textContent = {
                available: 'Tersedia',
                borrowed: 'Dipinjam',
                reserved: 'Direservasi'
            }[book.status];
            document.getElementById('modalBookRating').textContent = '‚≠ê'.repeat(book.rating);
            document.getElementById('modalBookDescription').textContent = book.description;

            const bookingBtn = document.getElementById('modalBookingBtn');
            if (book.status === 'available') {
                bookingBtn.disabled = false;
                bookingBtn.className = 'action-btn btn-primary';
                bookingBtn.onclick = () => bookingBook(bookId);
            } else {
                bookingBtn.disabled = true;
                bookingBtn.className = 'action-btn btn-disabled';
                bookingBtn.textContent = 'Tidak Tersedia';
            }

            document.getElementById('bookModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        // Close book modal
        function closeBookModal() {
            document.getElementById('bookModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Booking book function
        function bookingBook(bookId) {
            const book = booksData.find(b => b.id === bookId);
            if (!book || book.status !== 'available') {
                alert('Buku tidak tersedia untuk dibooking.');
                return;
            }

            const confirmBooking = confirm(`Apakah Anda yakin ingin booking buku "${book.title}"?\n\nBuku akan direservasi untuk Anda selama 3 hari.`);
            
            if (confirmBooking) {
                // Update book status
                book.status = 'reserved';
                
                // Store booking data
                const bookingData = {
                    bookId: bookId,
                    bookTitle: book.title,
                    bookAuthor: book.author,
                    userId: window.currentUser?.id || 'USER001',
                    bookingDate: new Date().toISOString(),
                    pickupDeadline: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000).toISOString(),
                    status: 'active'
                };

                // Store booking (in real app, this would be sent to server)
                if (!window.userBookings) {
                    window.userBookings = [];
                }
                window.userBookings.push(bookingData);

                alert(`‚úÖ Booking berhasil!\n\nBuku: ${book.title}\nHarus diambil sebelum: ${new Date(bookingData.pickupDeadline).toLocaleDateString('id-ID')}\n\nSilakan datang ke perpustakaan untuk mengambil buku Anda.`);
                
                // Close modal and refresh display
                closeBookModal();
                displayBooks();
            }
        }

        // Clear all filters
        function clearAllFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('categoryFilter').value = '';
            document.getElementById('yearFilter').value = '';
            document.getElementById('statusFilter').value = '';
            
            currentBooks = [...booksData];
            currentPage = 1;
            displayBooks();
            updateResultsCount();
        }

        // Update results count
        function updateResultsCount() {
            document.getElementById('resultsCount').textContent = currentBooks.length;
            document.getElementById('totalBooks').textContent = booksData.length;
        }

        // Show loading state
        function showLoading() {
            document.getElementById('loadingSpinner').style.display = 'flex';
            document.getElementById('booksGrid').style.display = 'none';
            document.getElementById('booksList').style.display = 'none';
            document.getElementById('emptyState').style.display = 'none';
            document.getElementById('pagination').style.display = 'none';
        }

        // Hide loading state
        function hideLoading() {
            document.getElementById('loadingSpinner').style.display = 'none';
            document.getElementById('pagination').style.display = 'flex';
            
            if (currentView === 'grid') {
                document.getElementById('booksGrid').style.display = 'grid';
            } else {
                document.getElementById('booksList').style.display = 'flex';
            }
        }

        // Show empty state
        function showEmptyState() {
            document.getElementById('emptyState').style.display = 'block';
            document.getElementById('booksGrid').style.display = 'none';
            document.getElementById('booksList').style.display = 'none';
            document.getElementById('pagination').style.display = 'none';
        }

        // Hide empty state
        function hideEmptyState() {
            document.getElementById('emptyState').style.display = 'none';
        }

        // Debounce function for search input
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Escape key to close modal
            if (e.key === 'Escape') {
                closeBookModal();
            }
            
            // Ctrl/Cmd + K for search focus
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }
            
            // Arrow keys for pagination
            if (e.key === 'ArrowLeft' && e.altKey) {
                e.preventDefault();
                if (currentPage > 1) {
                    changePage(currentPage - 1);
                }
            }
            
            if (e.key === 'ArrowRight' && e.altKey) {
                e.preventDefault();
                const totalPages = Math.ceil(currentBooks.length / booksPerPage);
                if (currentPage < totalPages) {
                    changePage(currentPage + 1);
                }
            }
        });

        // Handle browser back/forward navigation
        window.addEventListener('popstate', function(e) {
            if (e.state && e.state.page) {
                currentPage = e.state.page;
                displayBooks();
            }
        });

        // Update URL with current page (for better UX)
        function updateURL() {
            const url = new URL(window.location);
            url.searchParams.set('page', currentPage);
            history.replaceState({ page: currentPage }, '', url);
        }

        // Initialize from URL parameters
        function initializeFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const page = parseInt(urlParams.get('page')) || 1;
            const search = urlParams.get('search') || '';
            const category = urlParams.get('category') || '';
            const year = urlParams.get('year') || '';
            const status = urlParams.get('status') || '';

            if (search) document.getElementById('searchInput').value = search;
            if (category) document.getElementById('categoryFilter').value = category;
            if (year) document.getElementById('yearFilter').value = year;
            if (status) document.getElementById('statusFilter').value = status;

            currentPage = page;
            
            if (search || category || year || status) {
                applyFilters();
            }
        }

        // Enhanced initialization
        document.addEventListener('DOMContentLoaded', function() {
            initializeFromURL();
            displayBooks();
            setupEventListeners();
            updateResultsCount();
            
            // Add search suggestions
            addSearchSuggestions();
            
            // Add scroll to top button
            addScrollToTopButton();
        });

        // Add search suggestions
        function addSearchSuggestions() {
            const searchInput = document.getElementById('searchInput');
            const suggestions = [];
            
            booksData.forEach(book => {
                suggestions.push(book.title);
                suggestions.push(book.author);
            });
            
            const uniqueSuggestions = [...new Set(suggestions)];
            
            // This would typically implement an autocomplete dropdown
            // For demo purposes, we'll just add a title attribute
            searchInput.title = 'Coba cari: ' + uniqueSuggestions.slice(0, 5).join(', ');
        }

        // Add scroll to top button
        function addScrollToTopButton() {
            const scrollBtn = document.createElement('button');
            scrollBtn.innerHTML = '‚Üë';
            scrollBtn.className = 'scroll-to-top';
            scrollBtn.style.cssText = `
                position: fixed;
                bottom: 2rem;
                right: 2rem;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                background: #3498db;
                color: white;
                border: none;
                cursor: pointer;
                font-size: 1.5rem;
                opacity: 0;
                transition: all 0.3s ease;
                z-index: 1000;
            `;
            
            document.body.appendChild(scrollBtn);
            
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    scrollBtn.style.opacity = '1';
                } else {
                    scrollBtn.style.opacity = '0';
                }
            });
            
            scrollBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }

        // Analytics tracking (demo)
        function trackBookView(bookId) {
            console.log(`Book viewed: ${bookId}`);
            // In real app, this would send analytics data
        }

        function trackBooking(bookId) {
            console.log(`Book booked: ${bookId}`);
            // In real app, this would send analytics data
        }

        // Enhanced book card with analytics
        const originalOpenBookModal = openBookModal;
        openBookModal = function(bookId) {
            trackBookView(bookId);
            originalOpenBookModal(bookId);
        };

        const originalBookingBook = bookingBook;
        bookingBook = function(bookId) {
            trackBooking(bookId);
            originalBookingBook(bookId);
        };

        // Performance optimization: Virtual scrolling for large datasets
        // (This would be implemented for very large book collections)
        
        // Accessibility improvements
        document.addEventListener('DOMContentLoaded', function() {
            // Add ARIA labels
            document.getElementById('searchInput').setAttribute('aria-label', 'Cari buku berdasarkan judul, penulis, atau ISBN');
            document.getElementById('categoryFilter').setAttribute('aria-label', 'Filter berdasarkan kategori');
            document.getElementById('yearFilter').setAttribute('aria-label', 'Filter berdasarkan tahun');
            document.getElementById('statusFilter').setAttribute('aria-label', 'Filter berdasarkan status ketersediaan');
            
            // Add role attributes
            document.getElementById('booksGrid').setAttribute('role', 'grid');
            document.getElementById('booksList').setAttribute('role', 'list');
        });
    </script>
</body>
</html>